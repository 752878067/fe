# DOM 简介

DOM 全称 Document Object Model，即文档(的)对象模型。JavaScript 是其中一种可用于操作 DOM 的编程语言。

DOM 规范
* W3C https://www.w3.org/TR/dom
* WhatWG https://dom.spec.whatwg.org

## DOM 树 🌲
打开 Chrome 开发工具
* `Win` F12
* `Mac` Command + Option + I

选择 **Elements** 标签，DOM 树就在眼前。💡 在 Chrome Console 中，`$0` 代表当前选中的元素。

### DOM 节点
DOM 树由节点(Node)构成，一共有 12 种节点 https://dom.spec.whatwg.org/#node ，常用的有以下几种。
* 文档节点 `document`
* 元素节点 Element Node
* 文本节点 Text Node
* 注释节点 Comment Node

## document 对象
`document` 对象代表整个文档，即 DOM 树。
```javascript
> document
→ ▶︎ #document

> document.doctype            // 文档类型
→   <!DOCTYPE html>           // 返回结果由实际情况决定

> document.head               // <head>
→ ▶︎ <head>…</head>            // 返回结果由实际情况决定

> document.body               // <body>
→ ▶︎ <body>…</body>            // 返回结果由实际情况决定

> document.documentElement    // <html>
→ ▶︎ <html>…</html>            // 返回结果由实际情况决定

> document.documentElement.clientWidth     // 文档宽度(不包含滚动条)
→ 1265                                     // 返回结果由实际情况决定 

> document.documentElement.clientHeight    // 文档高度(不包含滚动条)
→ 640                                      // 返回结果由实际情况决定

> document.body.style.background = '#CDF5DC'
→ "#CDF5DC"
```

`document.getElementById()` 方法用于获取特定 `id` 的元素。
```html
<main id="content"></main>
```
```javascript
> document.getElementById('content')
→ ▶︎ <main id="content">…</main>

> window.content
→ ▶︎ <main id="content">…</main>
```

## 查找元素
`element.getElementsByTagName()`

`element.getElementsByClassName()`

`element.querySelector()`

`element.querySelectorAll()`

## Element
### Element 属性
`element.firstElementChild`
```javascript
> document.documentElement.firstElementChild
→ ▶︎ <head>…</head>
```

`element.lastElementChild`
```javascript
> document.documentElement.lastElementChild
→ ▶︎ <body>…</body>
```

### Element 方法
`Element.prototype.getAttribute()`

`Element.prototype.setAttribute()`

`Element.prototype.hasAttribute()`

`Element.prototype.matches()`

## Node
### Node 属性
`node.nodeName` `只读` 当前节点名称
```javascript
> document.nodeName
→ "#document"

> document.head.nodeName
→ "HEAD"
```
`node.nodeType` `只读` 当前节点类型
```javascript
> document.nodeType
→ 9

> document.body.nodeType
→ 1
```

### Node 方法

## EventTarget
`EventTarget.prototype.addEventListener()`

`EventTarget.prototype.removeEventListener()`

`EventTarget.prototyoe.dispatchEvent()`

## 继承关系
通过添加以下 `Object.prototype.ctors()` 方法查看某个节点对象(或任意对象)的继承关系。 
```javascript
Object.prototype.ctors = function(log = false) {
  let ctors = [];
  let proto = Object.getPrototypeOf(this);
  while (proto) {
    ctors.push(proto.constructor);
    proto = Object.getPrototypeOf(proto);
  }
  if (log) ctors.forEach(ctor => console.log(ctor));
  return ctors;
};
```
```javascript
> document.body.ctors(true)
  function HTMLBodyElement() { [native code] }
  function HTMLElement() { [native code] }
  function Element() { [native code] }
  function Node() { [native code] }
  function EventTarget() { [native code] }
  function Object() { [native code] }
→ ▶︎ (6) [function, function, function, function, function, function]
```

## CSSOM
CSSOM 全称 CSS Object Model，即 CSS 对象模型。https://www.w3.org/TR/cssom-1

## 参考链接
* https://css-tricks.com/dom
* https://javascript.info/browser-environment
* https://en.wikipedia.org/wiki/Document_Object_Model
* https://developer.mozilla.org/en-US/docs/Web/API/document
* https://developer.mozilla.org/en-US/docs/Web/API/Node
* https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType
* https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeName
* https://developer.mozilla.org/en-US/docs/Web/API/Element
* https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByTagName
* https://developer.mozilla.org/en-US/docs/Web/API/Element/matches
* https://developer.mozilla.org/en-US/docs/Web/API/EventTarget
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementById
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByTagName
* https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement
* https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement
* https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName
* https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction
* https://stackoverflow.com/questions/15763358/difference-between-htmlcollection-nodelists-and-arrays-of-objects
